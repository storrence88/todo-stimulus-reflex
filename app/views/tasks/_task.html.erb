<div id="<%= dom_id(task) %>"class="list-group-item d-flex justify-content-between <%= 'completed' if task.complete? %>" data-controller='task' data-id="<%= task.id %>">
  <div class="custom-control custom-checkbox mr-2" data-task-target='checkbox'>
    <input type="checkbox" class='custom-control-input' id="<%= dom_id(task) %>_checkbox" data-reflex='change->TaskReflex#toggle' data-id='<%= task.id %>' <%= 'checked' if task.complete? %>>
    <label for="<%= dom_id(task) %>_checkbox" class="custom-control-label">
      <% if task.complete? %>
        <del>
          <%= task.name %>
        </del>
        <span class="text-muted">Completed by: <%= task.completer_name %></span>
      <% else %>
        <%= task.name %>
        <% if task.completer %>
          <span class="text-muted" id="task-<%= task.id %>-assignee"><%= task.assignee_name %></span>
        <% end %>
      <% end %>
    </label>
  </div>
  <div class='collapse mt-2 no-transition' id='collapse-<%= task.id %>' data-task-target='collapse'>
    <%= bootstrap_form_with model: task, url: '', layout: :inline, html: { class: 'mb-2' }, data: { reflex: 'submit->TaskReflex#update', id: task.id } do |f| %>
      <%= f.text_field :name, skip_label: true, class: 'mr-2', id: "task_name_#{task.id}" %>
      <%= f.primary 'Update' %>
    <% end %>
    <%= select_tag :assignee, options_from_collection_for_select(User.all, :id, :name, task.assignee_id), class: 'custom-select', data: { reflex: 'change->TaskReflex#assign', id: task.id } %>
  </div>
  <div class='d-flex'>
    <%= link_to "#collapse-#{task.id}", data: { toggle: 'collapse'}, class: 'mr-2' do %>
      <i class="fa fa-edit text-primary"></i>
    <% end %>
    <%= link_to '#', data: { action: 'click->task#destroy', id: task.id } do %>
      <i class="fa fa-times text-danger"></i>
    <% end %>
  </div>
</div>